{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\nimport { PrismaPg } from '@prisma/adapter-pg'\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined\n}\n\nconst adapter = new PrismaPg({\n  connectionString: process.env.DATABASE_URL!,\n})\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({ adapter })\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;;;;AAEA,MAAM,kBAAkB;AAIxB,MAAM,UAAU,IAAI,yKAAQ,CAAC;IAC3B,kBAAkB,QAAQ,GAAG,CAAC,YAAY;AAC5C;AAEO,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IAAE;AAAQ;AAE7B,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/auth.ts"],"sourcesContent":["import bcrypt from 'bcryptjs';\nimport { SignJWT, jwtVerify } from 'jose';\nimport { cookies } from 'next/headers';\n\nconst JWT_SECRET = process.env.JWT_SECRET;\n\nif (!JWT_SECRET) {\n  throw new Error(\n    'JWT_SECRET environment variable is not set. ' +\n    'Please configure it before starting the application.'\n  );\n}\n\nexport interface JWTPayload {\n  userId: string;\n  email: string;\n  perfil: 'ADMIN' | 'MODERADOR';\n}\n\nexport async function hashPassword(password: string): Promise<string> {\n  return bcrypt.hash(password, 10);\n}\n\nexport async function verifyPassword(\n  password: string,\n  hashedPassword: string\n): Promise<boolean> {\n  return bcrypt.compare(password, hashedPassword);\n}\n\nexport async function signToken(payload: JWTPayload): Promise<string> {\n  const secret = new TextEncoder().encode(JWT_SECRET);\n  const token = await new SignJWT(payload as Record<string, unknown>)\n    .setProtectedHeader({ alg: 'HS256' })\n    .setExpirationTime('7d')\n    .sign(secret);\n  return token;\n}\n\nexport async function verifyToken(token: string): Promise<JWTPayload | null> {\n  try {\n    const secret = new TextEncoder().encode(JWT_SECRET);\n    const { payload } = await jwtVerify(token, secret);\n    return payload as unknown as JWTPayload;\n  } catch {\n    return null;\n  }\n}\n\nexport async function setAuthCookie(token: string) {\n  const cookieStore = await cookies();\n  cookieStore.set('auth-token', token, {\n    httpOnly: true,\n    secure: process.env.NODE_ENV === 'production',\n    sameSite: 'lax',\n    maxAge: 60 * 60 * 24 * 7, // 7 days\n    path: '/',\n  });\n}\n\nexport async function removeAuthCookie() {\n  const cookieStore = await cookies();\n  cookieStore.delete('auth-token');\n}\n\nexport async function getAuthToken(): Promise<string | undefined> {\n  const cookieStore = await cookies();\n  return cookieStore.get('auth-token')?.value;\n}\n\nexport async function getUserFromToken(request?: any): Promise<JWTPayload | null> {\n  let token = await getAuthToken();\n  \n  if (!token && request) {\n    const authHeader = request.headers?.get?.('authorization') || request.headers?.['authorization'];\n    if (authHeader?.startsWith('Bearer ')) {\n      token = authHeader.slice(7);\n    }\n  }\n  \n  if (!token) return null;\n  return verifyToken(token);\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;AAAA;AACA;;;;AAEA,MAAM,aAAa,QAAQ,GAAG,CAAC,UAAU;AAEzC,IAAI,CAAC,YAAY;IACf,MAAM,IAAI,MACR,iDACA;AAEJ;AAQO,eAAe,aAAa,QAAgB;IACjD,OAAO,8IAAM,CAAC,IAAI,CAAC,UAAU;AAC/B;AAEO,eAAe,eACpB,QAAgB,EAChB,cAAsB;IAEtB,OAAO,8IAAM,CAAC,OAAO,CAAC,UAAU;AAClC;AAEO,eAAe,UAAU,OAAmB;IACjD,MAAM,SAAS,IAAI,cAAc,MAAM,CAAC;IACxC,MAAM,QAAQ,MAAM,IAAI,kKAAO,CAAC,SAC7B,kBAAkB,CAAC;QAAE,KAAK;IAAQ,GAClC,iBAAiB,CAAC,MAClB,IAAI,CAAC;IACR,OAAO;AACT;AAEO,eAAe,YAAY,KAAa;IAC7C,IAAI;QACF,MAAM,SAAS,IAAI,cAAc,MAAM,CAAC;QACxC,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,IAAA,sKAAS,EAAC,OAAO;QAC3C,OAAO;IACT,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,eAAe,cAAc,KAAa;IAC/C,MAAM,cAAc,MAAM,IAAA,4IAAO;IACjC,YAAY,GAAG,CAAC,cAAc,OAAO;QACnC,UAAU;QACV,QAAQ,oDAAyB;QACjC,UAAU;QACV,QAAQ,KAAK,KAAK,KAAK;QACvB,MAAM;IACR;AACF;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,4IAAO;IACjC,YAAY,MAAM,CAAC;AACrB;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,4IAAO;IACjC,OAAO,YAAY,GAAG,CAAC,eAAe;AACxC;AAEO,eAAe,iBAAiB,OAAa;IAClD,IAAI,QAAQ,MAAM;IAElB,IAAI,CAAC,SAAS,SAAS;QACrB,MAAM,aAAa,QAAQ,OAAO,EAAE,MAAM,oBAAoB,QAAQ,OAAO,EAAE,CAAC,gBAAgB;QAChG,IAAI,YAAY,WAAW,YAAY;YACrC,QAAQ,WAAW,KAAK,CAAC;QAC3B;IACF;IAEA,IAAI,CAAC,OAAO,OAAO;IACnB,OAAO,YAAY;AACrB"}},
    {"offset": {"line": 179, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/resumo-analitico.ts"],"sourcesContent":["interface DadosEvolucao {\n  score_fluencia: number;\n  score_cultura: number;\n  score_interpretacao: number;\n  score_atencao: number;\n  score_auto_percepcao: number;\n  score_total: number;\n}\n\ninterface DadosPresenca {\n  percentual: number;\n}\n\ninterface VariacaoDominio {\n  dominio: string;\n  variacao: number;\n  tendencia: 'melhora' | 'estavel' | 'queda';\n}\n\ninterface ParametrosResumo {\n  evolucao: DadosEvolucao[];\n  variacoes: VariacaoDominio[];\n  presencas?: DadosPresenca[];\n  periodoMeses: number;\n}\n\nfunction classificarVariacao(variacao: number): 'melhora' | 'estavel' | 'queda' {\n  if (variacao > 1.0) return 'melhora';\n  if (variacao < -1.0) return 'queda';\n  return 'estavel';\n}\n\nfunction formatarListaDominios(dominios: string[]): string {\n  if (dominios.length === 0) return '';\n  if (dominios.length === 1) return dominios[0];\n  if (dominios.length === 2) return `${dominios[0]} e ${dominios[1]}`;\n  const ultimo = dominios.pop();\n  return `${dominios.join(', ')} e ${ultimo}`;\n}\n\nexport function gerarResumoAnalitico({ evolucao, variacoes, presencas, periodoMeses }: ParametrosResumo): string {\n  if (evolucao.length === 0) {\n    return 'Ainda não há avaliações suficientes para gerar um resumo analítico.';\n  }\n\n  const partes: string[] = [];\n  const periodoTexto = periodoMeses === 3 ? 'nos últimos 3 meses' :\n    periodoMeses === 6 ? 'nos últimos 6 meses' :\n    periodoMeses === 12 ? 'no último ano' :\n    'no período analisado';\n\n  const melhorias = variacoes.filter(v => v.tendencia === 'melhora').map(v => v.dominio);\n  const quedas = variacoes.filter(v => v.tendencia === 'queda').map(v => v.dominio);\n  const estaveis = variacoes.filter(v => v.tendencia === 'estavel').map(v => v.dominio);\n\n  if (melhorias.length > 0) {\n    const dominiosMelhora = formatarListaDominios([...melhorias]);\n    partes.push(`${periodoTexto.charAt(0).toUpperCase() + periodoTexto.slice(1)}, o aluno apresentou melhora consistente em ${dominiosMelhora}`);\n  }\n\n  if (estaveis.length > 0 && partes.length > 0) {\n    const dominiosEstaveis = formatarListaDominios([...estaveis]);\n    partes.push(`mantendo estabilidade em ${dominiosEstaveis}`);\n  } else if (estaveis.length > 0) {\n    const dominiosEstaveis = formatarListaDominios([...estaveis]);\n    partes.push(`${periodoTexto.charAt(0).toUpperCase() + periodoTexto.slice(1)}, o aluno manteve desempenho estável em ${dominiosEstaveis}`);\n  }\n\n  if (quedas.length > 0) {\n    const dominiosQueda = formatarListaDominios([...quedas]);\n    if (partes.length > 0) {\n      partes.push(`Observa-se leve queda em ${dominiosQueda}`);\n    } else {\n      partes.push(`${periodoTexto.charAt(0).toUpperCase() + periodoTexto.slice(1)}, observa-se queda no desempenho em ${dominiosQueda}`);\n    }\n  }\n\n  if (presencas && presencas.length > 0) {\n    const mediaPresenca = presencas.reduce((sum, p) => sum + p.percentual, 0) / presencas.length;\n    \n    if (mediaPresenca < 70 && quedas.length > 0) {\n      partes.push('coincidindo com redução na frequência às sessões no período');\n    } else if (mediaPresenca >= 85) {\n      partes.push('O aluno demonstrou excelente engajamento, com presença regular nas sessões');\n    } else if (mediaPresenca < 60) {\n      partes.push('A frequência reduzida às sessões pode estar impactando o desenvolvimento cognitivo');\n    }\n  }\n\n  if (partes.length === 0) {\n    return 'O aluno apresenta desempenho dentro dos parâmetros esperados, sem variações significativas no período.';\n  }\n\n  let texto = partes.join('. ');\n  if (!texto.endsWith('.')) {\n    texto += '.';\n  }\n\n  return texto;\n}\n\nexport function calcularVariacoes(evolucao: DadosEvolucao[], mesAtual: number): VariacaoDominio[] {\n  if (evolucao.length < 2) {\n    return [];\n  }\n\n  const ultimo = evolucao[evolucao.length - 1];\n  const indicePeriodo = Math.max(0, evolucao.length - mesAtual - 1);\n  const referencia = evolucao[indicePeriodo] || evolucao[0];\n\n  const dominios = [\n    { key: 'score_fluencia', nome: 'Fluência' },\n    { key: 'score_cultura', nome: 'Cultura' },\n    { key: 'score_interpretacao', nome: 'Interpretação' },\n    { key: 'score_atencao', nome: 'Atenção' },\n    { key: 'score_auto_percepcao', nome: 'Auto-percepção' },\n    { key: 'score_total', nome: 'Total' },\n  ];\n\n  return dominios.map(d => {\n    const atual = ultimo[d.key as keyof DadosEvolucao] || 0;\n    const anterior = referencia[d.key as keyof DadosEvolucao] || 0;\n    const variacao = atual - anterior;\n    return {\n      dominio: d.nome,\n      variacao,\n      tendencia: classificarVariacao(variacao),\n    };\n  });\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 302, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/api/moderador/relatorios/aluno/%5BalunoId%5D/anual/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { prisma } from '@/lib/prisma';\nimport { getUserFromToken } from '@/lib/auth';\nimport { gerarResumoAnalitico, calcularVariacoes } from '@/lib/resumo-analitico';\n\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: Promise<{ alunoId: string }> }\n) {\n  try {\n    const { alunoId } = await params;\n\n    const user = await getUserFromToken();\n    if (!user || user.perfil !== 'MODERADOR') {\n      return NextResponse.json({ error: 'Não autorizado' }, { status: 401 });\n    }\n\n    const aluno = await prisma.aluno.findFirst({\n      where: {\n        id: alunoId,\n        turma: { moderadorId: user.userId },\n      },\n      include: { turma: true },\n    });\n\n    if (!aluno) {\n      return NextResponse.json({ error: 'Aluno não encontrado' }, { status: 404 });\n    }\n\n    const { searchParams } = new URL(request.url);\n    const ano = parseInt(searchParams.get('ano') || new Date().getFullYear().toString());\n\n    const avaliacoes = await prisma.avaliacao.findMany({\n      where: {\n        alunoId,\n        ano_referencia: ano,\n        status: 'CONCLUIDA',\n      },\n      orderBy: { mes_referencia: 'asc' },\n    });\n\n    const trimestres = [\n      { nome: 'T1', meses: [1, 2, 3] },\n      { nome: 'T2', meses: [4, 5, 6] },\n      { nome: 'T3', meses: [7, 8, 9] },\n      { nome: 'T4', meses: [10, 11, 12] },\n    ];\n\n    const mediasTrimestrais = trimestres.map((tri) => {\n      const avsTri = avaliacoes.filter((a) => tri.meses.includes(a.mes_referencia));\n      if (avsTri.length === 0) {\n        return { trimestre: tri.nome, dados: null };\n      }\n      return {\n        trimestre: tri.nome,\n        dados: {\n          score_total: avsTri.reduce((s, a) => s + a.score_total, 0) / avsTri.length,\n          score_fluencia: avsTri.reduce((s, a) => s + a.score_fluencia_0a10, 0) / avsTri.length,\n          score_cultura: avsTri.reduce((s, a) => s + a.score_cultura_0a10, 0) / avsTri.length,\n          score_interpretacao: avsTri.reduce((s, a) => s + a.score_interpretacao_0a10, 0) / avsTri.length,\n          score_atencao: avsTri.reduce((s, a) => s + a.score_atencao_0a10, 0) / avsTri.length,\n          score_auto_percepcao: avsTri.reduce((s, a) => s + a.score_auto_percepcao_0a10, 0) / avsTri.length,\n        },\n      };\n    });\n\n    const evolucaoTrimestral = mediasTrimestrais\n      .filter((t) => t.dados)\n      .map((t) => ({\n        mes_ano: t.trimestre,\n        ...t.dados!,\n      }));\n\n    let mediaAnual = null;\n    if (avaliacoes.length > 0) {\n      mediaAnual = {\n        fluencia: avaliacoes.reduce((s, a) => s + a.score_fluencia_0a10, 0) / avaliacoes.length,\n        cultura: avaliacoes.reduce((s, a) => s + a.score_cultura_0a10, 0) / avaliacoes.length,\n        interpretacao: avaliacoes.reduce((s, a) => s + a.score_interpretacao_0a10, 0) / avaliacoes.length,\n        atencao: avaliacoes.reduce((s, a) => s + a.score_atencao_0a10, 0) / avaliacoes.length,\n        auto_percepcao: avaliacoes.reduce((s, a) => s + a.score_auto_percepcao_0a10, 0) / avaliacoes.length,\n      };\n    }\n\n    const radarAnual = mediaAnual\n      ? [\n          { dominio: 'Fluência', aluno: mediaAnual.fluencia },\n          { dominio: 'Cultura', aluno: mediaAnual.cultura },\n          { dominio: 'Interpretação', aluno: mediaAnual.interpretacao },\n          { dominio: 'Atenção', aluno: mediaAnual.atencao },\n          { dominio: 'Auto-percepção', aluno: mediaAnual.auto_percepcao },\n        ]\n      : [];\n\n    const presencas = await prisma.presenca.findMany({\n      where: {\n        alunoId,\n        data: {\n          gte: new Date(ano, 0, 1),\n          lte: new Date(ano, 11, 31),\n        },\n      },\n    });\n\n    const totalPresencas = presencas.filter((p) => p.presente).length;\n    const totalSessoes = presencas.length;\n    const presencaMediaAnual = totalSessoes > 0 ? (totalPresencas / totalSessoes) * 100 : 0;\n\n    const evolucaoParaResumo = avaliacoes.map((av) => ({\n      score_total: av.score_total,\n      score_fluencia: av.score_fluencia_0a10,\n      score_cultura: av.score_cultura_0a10,\n      score_interpretacao: av.score_interpretacao_0a10,\n      score_atencao: av.score_atencao_0a10,\n      score_auto_percepcao: av.score_auto_percepcao_0a10,\n    }));\n\n    const variacoes = calcularVariacoes(evolucaoParaResumo, 12);\n    const resumoTexto = gerarResumoAnalitico({\n      evolucao: evolucaoParaResumo,\n      variacoes,\n      presencas: [{ percentual: presencaMediaAnual }],\n      periodoMeses: 12,\n    });\n\n    const anosDisponiveis = await prisma.avaliacao.findMany({\n      where: { alunoId, status: 'CONCLUIDA' },\n      select: { ano_referencia: true },\n      distinct: ['ano_referencia'],\n      orderBy: { ano_referencia: 'desc' },\n    });\n\n    return NextResponse.json({\n      aluno: { id: aluno.id, nome: aluno.nome, turma: aluno.turma.nome_turma },\n      ano,\n      anosDisponiveis: anosDisponiveis.map((a) => a.ano_referencia),\n      evolucaoTrimestral,\n      radarAnual,\n      presencaMediaAnual,\n      resumoTexto,\n    });\n  } catch (error) {\n    console.error('Erro ao gerar relatório anual:', error);\n    return NextResponse.json({ error: 'Erro interno' }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":"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"}}]
}